if(void 0===Mzp)var Mzp={};!function(){"use strict";var l,c,u,h={},p=!1,f=document.body,m=document.documentElement,v={};h.createModal=function(t,e,i){v=i;var o=window.innerWidth<760;p&&h.closeModal();var n=v&&v.title?v.title:"",s=v&&v.className?v.className:"",r=v&&v.closeText?v.closeText:"",a='<div class="mzp-c-modal '+s+'" role="dialog" aria-labelledby="'+t.getAttribute("id")+'" tabindex="-1">  <div class="mzp-c-modal-window">    <div class="mzp-c-modal-inner">      <header><h2>'+n+'</h2></header>      <div class="mzp-c-modal-close">        <button type="button" class="mzp-c-modal-button-close">'+r+"</button>      </div>    </div>  </div></div>";v&&!v.allowScroll||o?m.classList.add("mzp-is-noscroll"):m.classList.remove("mzp-is-noscroll"),f.insertAdjacentHTML("beforeend",a),u=document.querySelector(".mzp-c-modal"),l=(c=e).parentNode,document.querySelector(".mzp-c-modal-inner").appendChild(e),e.classList.add("mzp-c-modal-overlay-contents");var d=document.querySelector(".mzp-c-modal-button-close");d.addEventListener("click",h.closeModal,!1),d.setAttribute("title",r),document.querySelector(".mzp-c-modal .mzp-c-modal-window").addEventListener("click",function(t){t.target===this&&h.closeModal()},!1),u.focus(),document.addEventListener("keyup",y,!1),document.addEventListener("focus",g,!1),t.classList.add("mzp-c-modal-origin"),p=!0,v&&"function"==typeof v.onCreate&&v.onCreate()};var y=function(t){27===t.keyCode&&p&&h.closeModal()},g=function(t){p&&!u.contains(t.target)&&(t.stopPropagation(),u.focus())};h.closeModal=function(t){t&&t.preventDefault(),l.appendChild(c),u.parentNode.removeChild(u),m.classList.remove("mzp-is-noscroll");var e=document.querySelector(".mzp-c-modal-origin");e.focus(),e.classList.remove("mzp-c-modal-origin"),p=!1,document.removeEventListener("focus",g,!1),v&&"function"==typeof v.onDestroy&&v.onDestroy(),v={}},window.Mzp.Modal=h}(),"undefined"==typeof window.Mozilla&&(window.Mozilla={}),function(n){"use strict";function s(t){this.formId=void 0!==t?"#"+t:"#send-to-device",this.formLoaded=!1,this.formTimeout=null,this.smsEnabled=!1,this.$widget=n(this.formId),this.$form=this.$widget.find(".send-to-device-form"),this.$formFields=this.$form.find(".send-to-device-form-fields"),this.$input=this.$formFields.find(".send-to-device-input"),this.$thankyou=this.$widget.find(".thank-you"),this.$errorList=this.$form.find(".error-list"),this.$spinnerTarget=this.$form.find(".loading-spinner"),this.$footerLinks=this.$widget.find("footer > ul"),this.$sendAnotherLink=this.$form.find(".send-another"),this.$formHeading=this.$widget.find(".form-heading"),this.spinnerColor=this.$widget.data("spinnerColor")||"#000",this.countries=this.$widget.data("countries"),this.spinner=new Spinner({lines:12,length:4,width:2,radius:4,corners:0,rotate:0,direction:1,color:this.spinnerColor,speed:1,trail:60,shadow:!1,hwaccel:!0})}s.COUNTRY_CODE="",s.prototype.init=function(){1===this.$widget.length&&(this.getLocation(),this.bindEvents())},s.prototype.getLocation=function(){var e=this;if(-1!==window.location.search.indexOf("geo=")){var t=/geo=([a-z]{2})/i.exec(window.location.search);if(t)return s.COUNTRY_CODE=t[1].toLowerCase(),e.updateMessaging(),void("function"==typeof e.geoCallback&&e.geoCallback(s.COUNTRY_CODE))}this.formTimeout=setTimeout(e.updateMessaging,5e3),n.get("/country-code.json").done(function(t){t&&t.country_code&&(s.COUNTRY_CODE=t.country_code.toLowerCase()),e.updateMessaging()}).fail(function(){e.updateMessaging()}).always(function(){"function"==typeof e.geoCallback&&e.geoCallback(s.COUNTRY_CODE)})},s.prototype.inSupportedCountry=function(){var t=s.COUNTRY_CODE;return t&&-1!==this.countries.indexOf("|"+t+"|")},s.prototype.updateMessaging=function(){clearTimeout(this.formTimeout),this.formLoaded||(this.formLoaded=!0,this.inSupportedCountry()&&this.showSMS())},s.prototype.showSMS=function(){var t=this.$formFields.find(".form-input-label");this.$form.addClass("sms-country"),t.html(t.data("alt")),this.$input.attr("placeholder",this.$input.data("alt")),this.smsEnabled=!0},s.prototype.bindEvents=function(){this.$form.on("submit",n.proxy(this.onFormSubmit,this)),this.$sendAnotherLink.on("click",n.proxy(this.sendAnother,this))},s.prototype.unbindEvents=function(){this.$form.off("submit"),this.$footerLinks.off("click"),this.$sendAnotherLink.off("click")},s.prototype.sendAnother=function(t){t.preventDefault(),this.$input.val(""),this.$errorList.addClass("hidden"),this.$thankyou.addClass("hidden"),this.$formHeading.removeClass("hidden"),this.$formFields.removeClass("hidden"),this.$input.trigger("focus")},s.prototype.enableForm=function(){this.$input.prop("disabled",!1),this.$form.removeClass("loading"),this.$spinnerTarget.hide()},s.prototype.disableForm=function(){this.$input.prop("disabled",!0),this.$form.addClass("loading"),this.spinner.spin(this.$spinnerTarget.show()[0])},s.prototype.checkEmailValidity=function(t){return/\S+@\S+/.test(t)},s.prototype.onFormSubmit=function(t){t.preventDefault();var e=this,i=this.$form.attr("action"),o=this.$form.serialize();this.disableForm(),this.smsEnabled||this.checkEmailValidity(this.$input.val())?(s.COUNTRY_CODE&&(o+="&country="+s.COUNTRY_CODE),n.post(i,o).done(function(t){t.success?e.onFormSuccess(t.success):t.errors&&e.onFormError(t.errors)}).fail(function(t){e.onFormFailure(t)})):this.onFormError(["email"])},s.prototype.onFormSuccess=function(){this.$errorList.addClass("hidden"),this.$formFields.addClass("hidden"),this.$formHeading.addClass("hidden"),this.$thankyou.removeClass("hidden"),this.enableForm();var t=this.checkEmailValidity(this.$input.val());window.dataLayer.push({event:"send-to-device-success",input:t?"email-address":"phone-number"})},s.prototype.onFormError=function(t){var e;this.$errorList.find("li").hide(),this.$errorList.removeClass("hidden"),e=-1!==n.inArray("platform",t)?".system":this.smsEnabled&&-1!==n.inArray("number",t)?".sms":".email",this.$errorList.find(e).show(),this.enableForm()},s.prototype.onFormFailure=function(){this.$errorList.find("li").hide(),this.$errorList.removeClass("hidden"),this.$errorList.find(".system").show(),this.enableForm()},window.Mozilla.SendToDevice=s}(window.jQuery),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()}(this,function(){"use strict";function m(t,e){var i,o=document.createElement(t||"div");for(i in e)o[i]=e[i];return o}function v(t){for(var e=1,i=arguments.length;e<i;e++)t.appendChild(arguments[e]);return t}function o(t,e){var i,o,n=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),o=0;o<s.length;o++)if(void 0!==n[i=s[o]+e])return i;return void 0!==n[e]?e:void 0}function y(t,e){for(var i in e)t.style[o(t,i)||i]=e[i];return t}function e(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)void 0===t[o]&&(t[o]=i[o])}return t}function g(t,e){return"string"==typeof t?t:t[e%t.length]}function i(t){this.opts=e(t||{},i.defaults,n)}var w,t,s=["webkit","Moz","ms","O"],$={},b=(t=m("style",{type:"text/css"}),v(document.getElementsByTagName("head")[0],t),t.sheet||t.styleSheet),n={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};i.defaults={},e(i.prototype,{spin:function(t){this.stop();var e=this,i=e.opts,o=e.el=y(m(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex});if(i.radius,i.length,i.width,y(o,{left:i.left,top:i.top}),t&&t.insertBefore(o,t.firstChild||null),o.setAttribute("role","progressbar"),e.lines(o,e.opts),!w){var n,s=0,r=(i.lines-1)*(1-i.direction)/2,a=i.fps,d=a/i.speed,l=(1-i.opacity)/(d*i.trail/100),c=d/i.lines;!function u(){s++;for(var t=0;t<i.lines;t++)n=Math.max(1-(s+(i.lines-t)*c)%d*l,i.opacity),e.opacity(o,t*i.direction+r,n,i);e.timeout=e.el&&setTimeout(u,~~(1e3/a))}()}return e},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(t,i){function e(t,e){return y(m(),{position:"absolute",width:i.length+i.width+"px",height:i.width+"px",background:t,boxShadow:e,transformOrigin:"left",transform:"rotate("+~~(360/i.lines*n+i.rotate)+"deg) translate("+i.radius+"px,0)",borderRadius:(i.corners*i.width>>1)+"px"})}for(var o,n=0,s=(i.lines-1)*(1-i.direction)/2;n<i.lines;n++)o=y(m(),{position:"absolute",top:1+~(i.width/2)+"px",transform:i.hwaccel?"translate3d(0,0,0)":"",opacity:i.opacity,animation:w&&(r=i.opacity,a=i.trail,d=s+n*i.direction,l=i.lines,void 0,void 0,void 0,void 0,void 0,c=["opacity",a,~~(100*r),d,l].join("-"),u=.01+d/l*100,h=Math.max(1-(1-r)/a*(100-u),r),p=w.substring(0,w.indexOf("Animation")).toLowerCase(),f=p&&"-"+p+"-"||"",$[c]||(b.insertRule("@"+f+"keyframes "+c+"{0%{opacity:"+h+"}"+u+"%{opacity:"+r+"}"+(.01+u)+"%{opacity:1}"+(u+a)%100+"%{opacity:"+r+"}100%{opacity:"+h+"}}",b.cssRules.length),$[c]=1),c+" "+1/i.speed+"s linear infinite")}),i.shadow&&v(o,y(e("#000","0 0 4px #000"),{top:"2px"})),v(t,v(o,e(g(i.color,n),"0 0 1px rgba(0,0,0,.1)")));var r,a,d,l,c,u,h,p,f;return t},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}});var r=y(m("group"),{behavior:"url(#default#VML)"});return!o(r,"transform")&&r.adj?function a(){function l(t,e){return m("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}b.addRule(".spin-vml","behavior:url(#default#VML)"),i.prototype.lines=function(t,o){function n(){return y(l("group",{coordsize:r+" "+r,coordorigin:-s+" "+-s}),{width:r,height:r})}function e(t,e,i){v(d,v(y(n(),{rotation:360/o.lines*t+"deg",left:~~e}),v(y(l("roundrect",{arcsize:o.corners}),{width:s,height:o.width,left:o.radius,top:-o.width>>1,filter:i}),l("fill",{color:g(o.color,t),opacity:o.opacity}),l("stroke",{opacity:0}))))}var i,s=o.length+o.width,r=2*s,a=2*-(o.width+o.length)+"px",d=y(n(),{position:"absolute",top:a,left:a});if(o.shadow)for(i=1;i<=o.lines;i++)e(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=o.lines;i++)e(i);return v(t,d)},i.prototype.opacity=function(t,e,i,o){var n=t.firstChild;o=o.shadow&&o.lines||0,n&&e+o<n.childNodes.length&&((n=(n=(n=n.childNodes[e+o])&&n.firstChild)&&n.firstChild)&&(n.opacity=i))}}():w=o(r,"animation"),i}),"undefined"==typeof window.Mozilla&&(window.Mozilla={}),function(t){"use strict";for(var e=document.querySelector(".mzp-u-modal-content"),i=document.getElementsByClassName("js-modal-link"),o=document.getElementById("send-to-device"),n=0,s=i.length;n<s;n++){var r=i[n];r.addEventListener("click",a),r.setAttribute("aria-role","button")}o&&(new t.SendToDevice).init();function a(t){t.preventDefault(),Mzp.Modal.createModal(t.target,e,{closeText:window.Mozilla.Utils.trans("global-close")})}}(window.Mozilla);